<div class="update-flight-container">
  <div class="header">
    <h2>Update Flight Details</h2>
    <p *ngIf="currentFlight">Editing Flight ID: {{ currentFlight.flightId }}</p>
    <p>Modify the flight information below</p>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading && !currentFlight" class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading flight details...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="success-message">
    {{ successMessage }}
  </div>

  <!-- Update Flight Form -->
  <form *ngIf="currentFlight && !loading" [formGroup]="flightForm" (ngSubmit)="onSubmit()" class="update-flight-form">
    <div class="form-row">
      <div class="form-group">
        <label for="carrierId">Carrier *</label>
        <select 
          id="carrierId" 
          formControlName="carrierId" 
          [class.invalid]="isFieldInvalid('carrierId')"
          class="form-control"
        >
          <option value="">Select a carrier</option>
          <option *ngFor="let carrier of carriers" [value]="carrier.carrierId">
            {{ carrier.carrierName }}
          </option>
        </select>
        <div *ngIf="isFieldInvalid('carrierId')" class="error-text">
          {{ getFieldError('carrierId') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="origin">Origin *</label>
        <input 
          type="text" 
          id="origin" 
          formControlName="origin" 
          [class.invalid]="isFieldInvalid('origin')"
          class="form-control"
          placeholder="Enter origin city"
        >
        <div *ngIf="isFieldInvalid('origin')" class="error-text">
          {{ getFieldError('origin') }}
        </div>
      </div>

      <div class="form-group">
        <label for="destination">Destination *</label>
        <input 
          type="text" 
          id="destination" 
          formControlName="destination" 
          [class.invalid]="isFieldInvalid('destination')"
          class="form-control"
          placeholder="Enter destination city"
        >
        <div *ngIf="isFieldInvalid('destination')" class="error-text">
          {{ getFieldError('destination') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="airFare">Air Fare ($) *</label>
        <input 
          type="number" 
          id="airFare" 
          formControlName="airFare" 
          [class.invalid]="isFieldInvalid('airFare')"
          class="form-control"
          placeholder="0.00"
          step="0.01"
          min="0.01"
        >
        <div *ngIf="isFieldInvalid('airFare')" class="error-text">
          {{ getFieldError('airFare') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="seatCapacityBusiness">Business Seat Capacity *</label>
        <input 
          type="number" 
          id="seatCapacityBusiness" 
          formControlName="seatCapacityBusiness" 
          [class.invalid]="isFieldInvalid('seatCapacityBusiness')"
          class="form-control"
          placeholder="0"
          min="1"
        >
        <div *ngIf="isFieldInvalid('seatCapacityBusiness')" class="error-text">
          {{ getFieldError('seatCapacityBusiness') }}
        </div>
      </div>

      <div class="form-group">
        <label for="seatCapacityEconomy">Economy Seat Capacity *</label>
        <input 
          type="number" 
          id="seatCapacityEconomy" 
          formControlName="seatCapacityEconomy" 
          [class.invalid]="isFieldInvalid('seatCapacityEconomy')"
          class="form-control"
          placeholder="0"
          min="1"
        >
        <div *ngIf="isFieldInvalid('seatCapacityEconomy')" class="error-text">
          {{ getFieldError('seatCapacityEconomy') }}
        </div>
      </div>

      <div class="form-group">
        <label for="seatCapacityExecutive">Executive Seat Capacity *</label>
        <input 
          type="number" 
          id="seatCapacityExecutive" 
          formControlName="seatCapacityExecutive" 
          [class.invalid]="isFieldInvalid('seatCapacityExecutive')"
          class="form-control"
          placeholder="0"
          min="1"
        >
        <div *ngIf="isFieldInvalid('seatCapacityExecutive')" class="error-text">
          {{ getFieldError('seatCapacityExecutive') }}
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button 
        type="submit" 
        [disabled]="!flightForm.valid || loading" 
        class="btn btn-primary"
      >
        <span *ngIf="!loading">Update Flight</span>
        <span *ngIf="loading">Updating...</span>
      </button>
      
      <button 
        type="button" 
        (click)="cancelUpdate()" 
        class="btn btn-secondary"
        [disabled]="loading"
      >
        Cancel
      </button>
    </div>
  </form>

  <!-- Back Button -->
  <div class="back-section">
    <button (click)="goBack()" class="btn btn-outline">
      ‚Üê Back to Flights
    </button>
  </div>
</div>
