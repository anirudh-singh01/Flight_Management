<div class="registration-container">
  <div class="registration-card">
    <div class="card-header">
      <h2>Customer Registration</h2>
      <p>Please fill in the form below to create your account</p>
    </div>

    <!-- Success/Error Messages -->
    <div *ngIf="message" class="alert" [ngClass]="messageType === 'success' ? 'alert-success' : 'alert-error'">
      <span>{{ message }}</span>
      <button type="button" class="close-btn" (click)="clearMessage()">&times;</button>
    </div>

    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form">
      
      <!-- Account Information Section -->
      <div class="form-section">
        <h3>Account Information</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="userName">Username *</label>
            <input 
              type="text" 
              id="userName" 
              formControlName="userName" 
              placeholder="Enter username"
              [class.error]="hasError('userName')"
            >
            <div *ngIf="hasError('userName')" class="error-message">
              {{ getErrorMessage('userName') }}
            </div>
          </div>

          <div class="form-group">
            <label for="role">Role *</label>
            <select id="role" formControlName="role" [class.error]="hasError('role')">
              <option *ngFor="let role of userRoles" [value]="role">{{ role }}</option>
            </select>
            <div *ngIf="hasError('role')" class="error-message">
              {{ getErrorMessage('role') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="password">Password *</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password" 
              placeholder="Enter password"
              [class.error]="hasError('password')"
            >
            <div *ngIf="hasError('password')" class="error-message">
              {{ getErrorMessage('password') }}
            </div>
          </div>

          <div class="form-group">
            <label for="confirmPassword">Confirm Password *</label>
            <input 
              type="password" 
              id="confirmPassword" 
              formControlName="confirmPassword" 
              placeholder="Confirm password"
              [class.error]="hasError('confirmPassword')"
            >
            <div *ngIf="hasError('confirmPassword')" class="error-message">
              {{ getErrorMessage('confirmPassword') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="customerCategory">Customer Category *</label>
            <select id="customerCategory" formControlName="customerCategory" [class.error]="hasError('customerCategory')">
              <option *ngFor="let category of customerCategories" [value]="category">{{ category }}</option>
            </select>
            <div *ngIf="hasError('customerCategory')" class="error-message">
              {{ getErrorMessage('customerCategory') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Personal Information Section -->
      <div class="form-section">
        <h3>Personal Information</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="phone">Phone Number *</label>
            <input 
              type="tel" 
              id="phone" 
              formControlName="phone" 
              placeholder="+1234567890"
              [class.error]="hasError('phone')"
            >
            <div *ngIf="hasError('phone')" class="error-message">
              {{ getErrorMessage('phone') }}
            </div>
          </div>

          <div class="form-group">
            <label for="emailId">Email Address *</label>
            <input 
              type="email" 
              id="emailId" 
              formControlName="emailId" 
              placeholder="Enter email address"
              [class.error]="hasError('emailId')"
            >
            <div *ngIf="hasError('emailId')" class="error-message">
              {{ getErrorMessage('emailId') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="dob">Date of Birth *</label>
            <input 
              type="date" 
              id="dob" 
              formControlName="dob" 
              [class.error]="hasError('dob')"
            >
            <div *ngIf="hasError('dob')" class="error-message">
              {{ getErrorMessage('dob') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Address Information Section -->
      <div class="form-section">
        <h3>Address Information</h3>
        
        <div class="form-row">
          <div class="form-group full-width">
            <label for="address1">Address Line 1 *</label>
            <input 
              type="text" 
              id="address1" 
              formControlName="address1" 
              placeholder="Enter street address"
              [class.error]="hasError('address1')"
            >
            <div *ngIf="hasError('address1')" class="error-message">
              {{ getErrorMessage('address1') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label for="address2">Address Line 2</label>
            <input 
              type="text" 
              id="address2" 
              formControlName="address2" 
              placeholder="Apartment, suite, etc. (optional)"
            >
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="city">City *</label>
            <input 
              type="text" 
              id="city" 
              formControlName="city" 
              placeholder="Enter city"
              [class.error]="hasError('city')"
            >
            <div *ngIf="hasError('city')" class="error-message">
              {{ getErrorMessage('city') }}
            </div>
          </div>

          <div class="form-group">
            <label for="state">State *</label>
            <input 
              type="text" 
              id="state" 
              formControlName="state" 
              placeholder="Enter state"
              [class.error]="hasError('state')"
            >
            <div *ngIf="hasError('state')" class="error-message">
              {{ getErrorMessage('state') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="zipCode">ZIP Code *</label>
            <input 
              type="text" 
              id="zipCode" 
              formControlName="zipCode" 
              placeholder="12345 or 12345-6789"
              [class.error]="hasError('zipCode')"
            >
            <div *ngIf="hasError('zipCode')" class="error-message">
              {{ getErrorMessage('zipCode') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-actions">
        <button 
          type="submit" 
          class="btn-submit" 
          [disabled]="isLoading || !registrationForm.valid"
        >
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? 'Registering...' : 'Register User' }}
        </button>
        
        <button 
          type="button" 
          class="btn-reset" 
          (click)="registrationForm.reset(); registrationForm.patchValue({role: 'CUSTOMER', customerCategory: 'REGULAR'})"
        >
          Reset Form
        </button>
      </div>
    </form>
    
    <!-- Navigation Links -->
    <div class="navigation-links">
      <a routerLink="/admin-register" class="nav-link">Register as Administrator</a>
      <a routerLink="/login" class="nav-link">Already have an account? Sign In</a>
    </div>
  </div>
</div>
